<div id ="photoMainDiv" ng-controller="PhotoListCtrl" ng-init="init()" >
  <div class="bar">
		<!-- These two buttons switch the layout variable,
			 which causes the correct UL to be shown. -->
		<a class="list-icon" ng-class="{active: layout == 'list'}" ng-click="layout = 'list'"></a>
		<a class="grid-icon" ng-class="{active: layout == 'grid'}" ng-click="layout = 'grid'"></a>
		<a class="folder-icon" ng-class="{active: listingId == null}" ng-click="listingId=null;init()"></a>
	</div>
	<!-- We have two layouts. We choose which one to show depending on the "layout" binding -->
	<ul ng-show="listingId && layout == 'grid'" class="grid">
		<!-- A view with big photos and no text -->
		<li ng-repeat="p in photos">
			<a href="{{p.thumbPath}}" target="_blank"><img ng-src="{{p.thumbPath}}" /></a>
		</li>
	</ul>
	<ul ng-show="listingId && layout == 'list'" class="list">
		<!-- A compact view smaller photos and titles -->
		<li ng-repeat="p in photos">
			<a href="{{p.thumbPath}}" target="_blank"><img ng-src="{{p.thumbPath}}" /></a>
			<p class="tags">{{p.tags.toString()}}</p>
            <input type="text" ui-select2="select2Options" ng-model="p.tags" >
		</li>
	</ul>
	
	<ul ng-show="!listingId && layout == 'grid'" class="grid">
		<li ng-repeat="l in listings">
			<a href="#" ng-click="$parent.listingId = l.id; $parent.init()">{{l.name}}</a>
		</li>
	</ul>
	<ul ng-show="!listingId && layout == 'list'" class="list">
		<li ng-repeat="l in listings">
			<a href="#" ng-click="$parent.listingId = l.id; $parent.init()">{{l.name}}</a>
			<p>Last modified: {{l.updatedAt | date:'MM-dd-yyyy HH:MM'}}</p>
		</li>
	</ul>
	
	<div ng-show="listingId">
	  <lvl-file-upload
	  auto-upload='false'
	  choose-file-button-text='Choose files'
	  upload-file-button-text='Upload files'
	  upload-url='/rest/api/photo'
	  max-files='10'
	  max-file-size-mb='5'
	  get-additional-data='getData(files)'
	  on-done='done(files, data)'
	  on-progress='progress(percentDone)'
	  on-error='error(files, type, msg)'/>
	</div>
</div>


